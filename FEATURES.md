# 주요 기능 상세 설명

## 1. 인증 및 권한 관리 (Auth & RBAC)

### 인증 (NextAuth)
- **Credentials Provider**: 이메일/비밀번호 기반 로그인
- **JWT 토큰**: 7일 유효기간
- **쉬운 OAuth 확장**: 필요시 Google, GitHub 등 추가 가능
- **세션 관리**: JWT 전략으로 확장성 확보

### 역할 기반 접근 제어
- **3가지 기본 역할**: admin, manager, user
- **세밀한 권한**: create, read, update, delete
- **리소스별 권한**: 12개 리소스에 대한 개별 권한
- **미들웨어 보호**: API와 Web 라우트 모두 보호

## 2. 프로젝트 관리

### 기본 정보
- 프로젝트명, 설명, 상태
- 파트너사 연결
- 지역 및 업종 프리셋 적용
- 예산 및 실제 비용 추적
- 진행률 모니터링

### 마일스톤
- 순서 기반 단계 관리
- 마감일 설정 및 추적
- 완료 상태 체크
- 타임라인 시각화

### 환경 모니터링
- 온도, 습도, CO2 수치 기록
- 시계열 데이터 차트
- 실시간 알림 (추가 개발 가능)

### LIVE CCTV
- 카메라 스트림 URL 관리
- 활성/비활성 상태
- 다중 카메라 지원

### HACCP 단계
- 업종별 프리셋 HACCP 단계
- 각 단계별 기준 설정
- 진행 상태 추적
- 완료 일자 기록

## 3. 견적 관리

### 버전 관리
- 견적 버전별 이력 보관
- 입력 데이터 vs 결과 비교
- 차이점(diff) 시각화

### 견적 계산
- 지역별 비용 지수 적용
- 자재 카탈로그 연동
- 인건비, 장비비 등 세부 항목

## 4. 3D 시각화

### 요청 관리
- 프로젝트 정보 입력
- 치수 및 레이아웃 파라미터
- 처리 상태 추적

### 결과 파일
- glTF, GLB, OBJ 등 3D 모델
- PNG, PDF 미리보기
- S3 저장 및 다운로드

## 5. 계약 관리

### 계약서
- 프로젝트 연결
- 총 계약 금액
- 상태 관리 (draft, pending, signed)

### 조항 (Clauses)
- Markdown 지원
- 순서 기반 정렬
- 실시간 편집

### 전자서명
- 다중 서명자
- 서명 시간 및 IP 기록
- 서명 상태 추적
- 완료 알림

### 결제 일정
- 계약금, 중도금, 잔금
- 진행 상태별 지급 조건

## 6. 파트너 관리

### 등급 시스템
- DIAMOND, PLATINUM, GOLD, SILVER, BRONZE
- 매출 및 프로젝트 수 기반 자동 등급
- 등급별 혜택 (추가 개발 가능)

### 성과 관리
- 인증 획득 이력
- 수상 기록
- 타임라인 시각화

## 7. 리드 관리

### 리드 상태
- new: 신규
- contacted: 접촉 완료
- qualified: 적격
- converted: 전환 완료

### 추적 정보
- 유입 경로 (source)
- 예상 예산
- 노트 및 이력

## 8. 카탈로그

### 자재 관리
- 카테고리별 분류
- 단가 및 단위
- 공급사 정보
- 스펙 (JSON)
- 활성/비활성 상태

### 활용
- 견적서 자동 생성
- 재고 연동 (확장 가능)

## 9. 설정

### 지역 관리
- 지역별 비용 지수
- 지역 코드
- 견적 계산 시 자동 적용

### 업종 프리셋
- 업종별 표준 설정
- HACCP 단계 템플릿
- 환경 기준 (온도, 습도 등)

### 감사 로그
- 모든 CRUD 작업 기록
- 사용자, 시간, IP 추적
- 리소스별 필터링
- 규정 준수 및 보안 감사

## 10. 파일 업로드 (S3)

### Signed URL
- 보안 업로드 URL 생성
- 1시간 유효기간
- PUT/GET 별도 URL

### 지원 파일
- 이미지 (JPEG, PNG)
- 문서 (PDF)
- 3D 모델 (glTF, GLB)
- 기타 첨부파일

## 11. UI/UX 특징

### 테이블
- TanStack Table (서버사이드)
- 정렬, 필터, 페이지네이션
- CSV 내보내기

### 폼
- react-hook-form
- Zod 스키마 검증
- 실시간 에러 표시

### 차트
- Recharts 라이브러리
- 막대, 선, 파이 차트
- 반응형 디자인

### 토스트
- 성공/실패 알림
- 자동 사라짐
- 액션 버튼 지원

### 탭
- 프로젝트 상세 페이지
- 계약 정보 구분
- URL 기반 딥링크 (확장 가능)

## 12. 국제화 (i18n)

### next-intl
- 한국어 기본
- 메시지 JSON 파일
- 번역 키 기반
- 추가 언어 쉽게 확장

## 13. 보안

### 인증
- NextAuth 미들웨어
- JWT 토큰
- Refresh token (확장 가능)

### 권한
- 역할별 페이지 접근
- API 엔드포인트 보호
- 리소스별 세밀한 권한

### 감사
- 모든 변경사항 로깅
- IP 주소 기록
- 타임스탬프

### HTTP 보안
- Helmet.js
- CORS 설정
- Rate limiting (추가 개발 가능)

## 14. 성능 최적화

### 서버사이드
- API 페이지네이션
- 데이터베이스 인덱싱
- Prisma 쿼리 최적화

### 클라이언트
- Next.js App Router
- 서버 컴포넌트
- 이미지 최적화
- 코드 스플리팅

## 15. 확장 가능성

### 향후 추가 기능
- [ ] 실시간 알림 (WebSocket)
- [ ] 모바일 앱 (React Native)
- [ ] 고급 리포팅
- [ ] AI 견적 추천
- [ ] ERP 연동
- [ ] 결제 게이트웨이
- [ ] 고급 권한 (팀, 부서)
- [ ] SSO (SAML, OAuth2)

